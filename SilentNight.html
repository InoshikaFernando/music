<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Silent Night Chords</title>
  <style>
    body { 
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #1e3c72 0%, #2a5298 50%, #4a90e2 100%);
      text-align: center;
      margin: 0;
      padding: 40px 20px;
      min-height: 100vh;
      color: white;
    }
    
    h1 {
      color: #ffffff;
      text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
      margin-bottom: 30px;
      font-size: 2.5em;
      font-weight: 300;
    }
    
    label {
      color: #e8f4fd;
      font-weight: 500;
      margin: 0 10px;
      text-shadow: 1px 1px 2px rgba(0,0,0,0.2);
    }
    
    select {
      background: linear-gradient(145deg, #ffffff, #f0f8ff);
      border: 2px solid #4a90e2;
      border-radius: 8px;
      padding: 8px 12px;
      margin: 0 10px;
      font-size: 14px;
      color: #2a5298;
      font-weight: 500;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      transition: all 0.3s ease;
    }
    
    select:hover {
      border-color: #2a5298;
      box-shadow: 0 4px 8px rgba(0,0,0,0.15);
      transform: translateY(-1px);
    }
    
    select:focus {
      outline: none;
      border-color: #1e3c72;
      box-shadow: 0 0 0 3px rgba(74, 144, 226, 0.3);
    }
    
    button {
      background: linear-gradient(145deg, #4a90e2, #2a5298);
      color: white;
      border: none;
      border-radius: 25px;
      padding: 12px 24px;
      margin: 10px;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      box-shadow: 0 4px 15px rgba(74, 144, 226, 0.3);
      transition: all 0.3s ease;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }
    
    button:hover {
      background: linear-gradient(145deg, #2a5298, #1e3c72);
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(74, 144, 226, 0.4);
    }
    
    button:active {
      transform: translateY(0);
      box-shadow: 0 2px 10px rgba(74, 144, 226, 0.3);
    }
    
    table { 
      border-collapse: separate;
      border-spacing: 8px;
      background: rgba(255, 255, 255, 0.95);
      margin: 30px auto;
      border-radius: 15px;
      padding: 20px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.2);
      backdrop-filter: blur(10px);
    }
    
    td, th { 
      border: 3px solid #4a90e2;
      border-radius: 12px;
      width: 150px; 
      text-align: left;
      font-size: 22px;
      font-weight: bold;
      background: linear-gradient(145deg, #ffffff, #f8fbff);
      box-shadow: inset 0 2px 4px rgba(74, 144, 226, 0.1);
      transition: all 0.3s ease;
      padding: 15px;
    }
    
    td:hover, th:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(74, 144, 226, 0.2);
    }
    
    p { 
      margin: 5px; 
      text-shadow: 1px 1px 2px rgba(0,0,0,0.1);
    }
    
    .chord { 
      color: #d32f2f; 
      font-size: 18px; 
      font-weight: 700;
      text-shadow: 1px 1px 2px rgba(0,0,0,0.2);
    }
    
    .notes { 
      color: #1976d2; 
      font-size: 18px; 
      font-weight: 600;
    }
    
    .notes::first-letter {
      color: #1e3c72;
      font-size: 20px;
      font-weight: bold;
      font-style: italic;
    }
    
    .lyrics { 
      color: #000000; 
      font-size: 14px; 
      font-weight: 500;
      text-shadow: 1px 1px 2px rgba(255,255,255,0.8);
    }
    
    .active {
      background: linear-gradient(145deg, #e0e0e0, #bdbdbd);
      animation: pulse1 0.5s ease-in-out;
      box-shadow: 0 0 15px rgba(189, 189, 189, 0.6);
    }
    
    .active2 {
      background: linear-gradient(145deg, #bdbdbd, #9e9e9e);
      animation: pulse2 0.5s ease-in-out;
      box-shadow: 0 0 15px rgba(158, 158, 158, 0.6);
    }
    
    .active3 {
      background: linear-gradient(145deg, #9e9e9e, #757575);
      animation: pulse3 0.5s ease-in-out;
      box-shadow: 0 0 15px rgba(117, 117, 117, 0.6);
    }
    .cellHeader {
      color: #000;
      font-size: 14px; 
      width: 80px;
      min-width: 80px;
      max-width: 80px;
      padding: 6px 8px;
      font-weight: 500;
      white-space: nowrap;
      background: linear-gradient(145deg, #e6f3ff, #cce7ff);
      border: 3px solid #4a90e2;
      border-radius: 12px;
      box-shadow: inset 0 2px 4px rgba(74, 144, 226, 0.1);
    }
    @keyframes pulse1 {
      0% { transform: scale(1); }
      50% { transform: scale(1.05); }
      100% { transform: scale(1); }
    }
    
    @keyframes pulse2 {
      0% { transform: scale(1); }
      50% { transform: scale(1.05); }
      100% { transform: scale(1); }
    }
    
    @keyframes pulse3 {
      0% { transform: scale(1); }
      50% { transform: scale(1.05); }
      100% { transform: scale(1); }
    }
    
    /* Beat counter cells styling */
    #cell0, #cell1, #cell2, #cell3 {
      color: #000000;
      font-weight: 700;
      text-shadow: 1px 1px 2px rgba(255,255,255,0.8);
    }
    
    /* Back button styling */
    button[onclick] {
      background: linear-gradient(145deg, #6c757d, #495057);
      font-size: 14px;
      padding: 10px 20px;
      margin-top: 30px;
    }
    
    button[onclick]:hover {
      background: linear-gradient(145deg, #495057, #343a40);
    }
  </style>
</head>
<body>
  <h1>Silent Night - Chord Player</h1>

  <label>Tempo (BPM):</label>
  <select id="tempo">
    <option value="60">60</option>
    <option value="80">80</option>
    <option value="90" selected>90</option>
    <option value="100">100</option>
    <option value="120">120</option>
    <option value="140">140</option>
  </select>

  <button id="playBtn">‚ñ∂ Play</button>
  <button id="stopBtn">‚èπ Stop</button>

  <table>
      <tr>
        <td class="cellHeader">Rest</td>
        <td id="cell0">1 2 3</td>
        <td id="cell1">1 2 3</td>
        <td id="cell2">1 2 3</td>
        <td id="cell3">1 2 3</td>
      </tr>
    <tr>
        <td class="cellHeader">
            <p>üé∏Chords</p>
            <p>üéªNotes</p>
            <p>üéº Lyrics</p>
        </td>
        <td id="cell4">
            <p class="chord">G</p>
            <p class="notes">D  -E  D</p>
            <p class="lyrics">Si - lent</p>
        </td>
        <td id="cell5">
            <p class="chord">G</p>
            <p class="notes">B&#x0323;  -  -</p>
            <p class="lyrics">N - ight</p>
        </td>
        <td id="cell6">
            <p class="chord">G</p>
            <p class="notes">D  -E  D</p>
            <p class="lyrics">Ho - ly</p>
        </td>
        <td id="cell7">
            <p class="chord">G</p>
            <p class="notes">B&#x0323;  -  -</p>
            <p class="lyrics">N - ight</p>
        </td>
    </tr>
    <tr>
        <td class="cellHeader">
            <p>üé∏Chords</p>
            <p>üéªNotes</p>
            <p>üéº Lyrics</p>
        </td>
        <td id="cell8">
            <p class="chord">D</p>
            <p class="notes">A  - A</p>
            <p class="lyrics">All is</p>
        </td>
        <td id="cell9">
            <p class="chord">D7</p>
            <p class="notes">F#  -  -</p>
            <p class="lyrics">calm</p>
        </td>
        <td id="cell10">
            <p class="chord">G</p>
            <p class="notes">G  -  G</p>
            <p class="lyrics">All - is</p>
        </td>
        <td id="cell11">
            <p class="chord">G</p>
            <p class="notes">D  -  -</p>
            <p class="lyrics">Bright</p>
        </td>
    </tr>
    <tr>
        <td class="cellHeader">
            <p>üé∏Chords</p>
            <p>üéªNotes</p>
            <p>üéº Lyrics</p>
        </td>
        <td id="cell12">
            <p class="chord">C</p>
            <p class="notes">E  -  E</p>
            <p class="lyrics">Round yon</p>
        </td>
        <td id="cell13">
            <p class="chord">C</p>
            <p class="notes">G  -F#  E</p>
            <p class="lyrics">Vir - gin</p>
        </td>
        <td id="cell14">
            <p class="chord">G</p>
            <p class="notes">D  -E  D</p>
            <p class="lyrics">Mo - ther and</p>
        </td>
        <td id="cell15">
            <p class="chord">G</p>
            <p class="notes">B  -  -</p>
            <p class="lyrics">Child</p>
        </td>
    </tr>
    <tr>
        <td class="cellHeader">
            <p>üé∏Chords</p>
            <p>üéªNotes</p>
            <p>üéº Lyrics</p>
        </td>
        <td id="cell16">
            <p class="chord">C</p>
            <p class="notes">E  -  E</p>
            <p class="lyrics">Holy</p>
        </td>
        <td id="cell17">
            <p class="chord">C</p>
            <p class="notes">G  -F#  E</p>
            <p class="lyrics">Infant so</p>
        </td>
        <td id="cell18">
            <p class="chord">G</p>
            <p class="notes">D  -E  D</p>
            <p class="lyrics">tender and</p>
        </td>
        <td id="cell19">
            <p class="chord">G</p>
            <p class="notes">B  -  -</p>
            <p class="lyrics">mild</p>
        </td>
    </tr>
    <tr>
        <td class="cellHeader">
            <p>üé∏Chords</p>
            <p>üéªNotes</p>
            <p>üéº Lyrics</p>
        </td>
        <td id="cell20">
            <p class="chord">D</p>
            <p class="notes">A  -  -A</p>
            <p class="lyrics">Sleep in</p>
        </td>
        <td id="cell21">
            <p class="chord">D7</p>
            <p class="notes">&#266;  -A  F#</p>
            <p class="lyrics">heav'nly</p>
        </td>
        <td id="cell22">
            <p class="chord">G</p>
            <p class="notes">G  -  -</p>
            <p class="lyrics">Pea--</p>
        </td>
        <td id="cell23">
            <p class="chord">Em</p>
            <p class="notes">B  -  -</p>
            <p class="lyrics">--ce</p>
        </td>
    </tr>
    <tr>
        <td class="cellHeader">
            <p>üé∏Chords</p>
            <p>üéªNotes</p>
            <p>üéº Lyrics</p>
        </td>
        <td id="cell24">
            <p class="chord">G</p>
            <p class="notes">G  D  B&#x0323;</p>
            <p class="lyrics">Sleep in</p>
        </td>
        <td id="cell25">
            <p class="chord">D</p>
            <p class="notes">D  -B&#x0323;  A&#x0323;</p>
            <p class="lyrics">heav'nly</p>
        </td>
        <td id="cell26">
            <p class="chord">G</p>
            <p class="notes">G&#x0323;  -  -</p>
            <p class="lyrics">Pea--</p>
        </td>
        <td id="cell27">
            <p class="chord">G</p>
            <p class="notes">-  -  -</p>
            <p class="lyrics">--ce</p>
        </td>
    </tr>
  </table>

  <button onclick="location.href='index.html'">‚Üê Back to Music Collection</button>
  <script>
    const row = document.getElementById("row");
    const playBtn = document.getElementById("playBtn");
    const stopBtn = document.getElementById("stopBtn");
    const tempoSelect = document.getElementById("tempo");

    let interval, beatNumber = 0, currentBar = 0, currentBeat = 0;
    const numberOfBars = 28;
    const timeSignature = 3; // 3/4 time
    const audioCtx = new (window.AudioContext || window.webkitAudioContext)();

    function playClick() {
      const osc = audioCtx.createOscillator();
      const gain = audioCtx.createGain();
      osc.connect(gain);
      gain.connect(audioCtx.destination);
      osc.frequency.value = 880;
      gain.gain.value = 0.2;
      osc.start();
      osc.stop(audioCtx.currentTime + 0.1);
    }

    function startPlayback() {
      stopPlayback();
      const bpm = parseInt(tempoSelect.value);
      beatDuration = (60 / bpm) * 1000; // duration of one beat in ms
      const barDuration = beatDuration * timeSignature;
      currentBeat = 0;

      interval = setInterval(() => {
        const activeCell = document.getElementById(`cell${currentBar}`);
        if (activeCell) {
            if (beatNumber === 0) {
                document.querySelectorAll("td").forEach(el => el.classList.remove("active3"));
                activeCell.classList.add("active");
            } else if (beatNumber === 1) {
                document.querySelectorAll("td").forEach(el => el.classList.remove("active"));
                activeCell.classList.add("active2");
            } else if (beatNumber === 2) {
                document.querySelectorAll("td").forEach(el => el.classList.remove("active2"));
                activeCell.classList.add("active3");
            }
            
            // Auto-scroll to keep the active cell in view
            setTimeout(() => {
              activeCell.scrollIntoView({ 
                behavior: 'smooth', 
                block: 'center',
                inline: 'center'
              });
            }, 100);
        }

        playClick(); // strong click on first chord
        currentBeat = (currentBeat + 1) % (numberOfBars * timeSignature);
        beatNumber = currentBeat % timeSignature;
        currentBar = Math.floor(currentBeat / timeSignature);
      }, beatDuration);
    }

    function stopPlayback() {
      clearInterval(interval);
      beatNumber = 0;
      currentBar = 0;
      currentBeat = 0;
      document.querySelectorAll("td").forEach(el => el.classList.remove("active"));
      document.querySelectorAll("td").forEach(el => el.classList.remove("active2"));
      document.querySelectorAll("td").forEach(el => el.classList.remove("active3"));
    }

    playBtn.addEventListener("click", () => {
      audioCtx.resume();
      startPlayback();
    });
    stopBtn.addEventListener("click", stopPlayback);

  </script>
</body>
</html>
